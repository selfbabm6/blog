<!DOCTYPE html>
<html lang="en">
<head><meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta http-equiv="X-UA-Compatible" content="ie=edge">
<link href="https://fonts.googleapis.com/css?family=Nunito+Sans:400,400i,700&display=swap" rel="stylesheet">
<link rel="stylesheet" href="/assets/css/style.css">
<title>js</title>
<!-- Begin Jekyll SEO tag v2.6.1 -->
<title>js | Tblog</title>
<meta name="generator" content="Jekyll v3.8.5" />
<meta property="og:title" content="js" />
<meta name="author" content="selfbabm" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="js基础." />
<meta property="og:description" content="js基础." />
<meta property="og:site_name" content="Tblog" />
<meta property="og:type" content="article" />
<meta property="article:published_time" content="2020-02-19T19:03:36+08:00" />
<script type="application/ld+json">
{"mainEntityOfPage":{"@type":"WebPage","@id":"/posts/js/"},"url":"/posts/js/","author":{"@type":"Person","name":"selfbabm"},"headline":"js","description":"js基础.","dateModified":"2020-02-19T19:03:36+08:00","datePublished":"2020-02-19T19:03:36+08:00","@type":"BlogPosting","@context":"https://schema.org"}</script>
<!-- End Jekyll SEO tag -->
</head>
<body>
  <header class="texture-green">
    <div class="container"></div><div class="container">
	<h1>js</h1>
	<h4 class="post-description">js基础.</h4>
	<div class="post-date" style="margin-top:20px">
		Published on Feb 19, 2020
	</div>
	<ul class="post-tags"><li>sumrise</li></ul>
</div>
</header>
  <main>
    <div class="container">
      <div class="post-container">
          <h1 id="js基础题">js基础题</h1>

<div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">var</span> <span class="nx">b</span> <span class="o">=</span> <span class="mi">10</span><span class="p">;</span>
<span class="p">(</span><span class="kd">function</span> <span class="nx">b</span><span class="p">(){</span>
    <span class="nx">b</span> <span class="o">=</span> <span class="mi">20</span><span class="p">;</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">b</span><span class="p">);</span> 
<span class="p">})()</span> <span class="c1">//fn</span>
<span class="cm">/**
 * IIFE中的函数是函数表达式，而不是函数声明
 * 函数表达式与函数声明不同，函数名只在该函数内部有效，并且此绑定是常量绑定
 * 函数体内的函数名再去赋值，会静默失败。类似常量再赋值
 */</span>

<span class="c1">//变量提升</span>
<span class="kd">var</span> <span class="nx">a</span> <span class="o">=</span> <span class="mi">10</span><span class="p">;</span>
<span class="p">(</span><span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">a</span><span class="p">)</span>
    <span class="nx">a</span> <span class="o">=</span> <span class="mi">5</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nb">window</span><span class="p">.</span><span class="nx">a</span><span class="p">)</span>
    <span class="kd">var</span> <span class="nx">a</span> <span class="o">=</span> <span class="mi">20</span><span class="p">;</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">a</span><span class="p">)</span>
<span class="p">})()</span>
<span class="c1">//undefined=&gt;10=&gt;20</span>

<span class="c1">//symbol 唯一性</span>
<span class="c1">// example 1</span>
<span class="kd">var</span> <span class="nx">a</span><span class="o">=</span><span class="p">{},</span> <span class="nx">b</span><span class="o">=</span><span class="dl">'</span><span class="s1">123</span><span class="dl">'</span><span class="p">,</span> <span class="nx">c</span><span class="o">=</span><span class="mi">123</span><span class="p">;</span>  
<span class="nx">a</span><span class="p">[</span><span class="nx">b</span><span class="p">]</span><span class="o">=</span><span class="dl">'</span><span class="s1">b</span><span class="dl">'</span><span class="p">;</span>
<span class="nx">a</span><span class="p">[</span><span class="nx">c</span><span class="p">]</span><span class="o">=</span><span class="dl">'</span><span class="s1">c</span><span class="dl">'</span><span class="p">;</span>  
<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">a</span><span class="p">[</span><span class="nx">b</span><span class="p">]);</span>

<span class="o">---------------------</span>
<span class="c1">// example 2</span>
<span class="kd">var</span> <span class="nx">a</span><span class="o">=</span><span class="p">{},</span> <span class="nx">b</span><span class="o">=</span><span class="nb">Symbol</span><span class="p">(</span><span class="dl">'</span><span class="s1">123</span><span class="dl">'</span><span class="p">),</span> <span class="nx">c</span><span class="o">=</span><span class="nb">Symbol</span><span class="p">(</span><span class="dl">'</span><span class="s1">123</span><span class="dl">'</span><span class="p">);</span>  
<span class="nx">a</span><span class="p">[</span><span class="nx">b</span><span class="p">]</span><span class="o">=</span><span class="dl">'</span><span class="s1">b</span><span class="dl">'</span><span class="p">;</span>
<span class="nx">a</span><span class="p">[</span><span class="nx">c</span><span class="p">]</span><span class="o">=</span><span class="dl">'</span><span class="s1">c</span><span class="dl">'</span><span class="p">;</span>  
<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">a</span><span class="p">[</span><span class="nx">b</span><span class="p">]);</span>

<span class="o">---------------------</span>
<span class="c1">// example 3</span>
<span class="kd">var</span> <span class="nx">a</span><span class="o">=</span><span class="p">{},</span> <span class="nx">b</span><span class="o">=</span><span class="p">{</span><span class="na">key</span><span class="p">:</span><span class="dl">'</span><span class="s1">123</span><span class="dl">'</span><span class="p">},</span> <span class="nx">c</span><span class="o">=</span><span class="p">{</span><span class="na">key</span><span class="p">:</span><span class="dl">'</span><span class="s1">456</span><span class="dl">'</span><span class="p">};</span>  
<span class="nx">a</span><span class="p">[</span><span class="nx">b</span><span class="p">]</span><span class="o">=</span><span class="dl">'</span><span class="s1">b</span><span class="dl">'</span><span class="p">;</span>
<span class="nx">a</span><span class="p">[</span><span class="nx">c</span><span class="p">]</span><span class="o">=</span><span class="dl">'</span><span class="s1">c</span><span class="dl">'</span><span class="p">;</span>  
<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">a</span><span class="p">[</span><span class="nx">b</span><span class="p">]);</span>

<span class="c1">//左查询右查询</span>
<span class="kd">var</span> <span class="nx">a</span> <span class="o">=</span> <span class="p">{</span><span class="na">n</span><span class="p">:</span> <span class="mi">1</span><span class="p">};</span>
<span class="kd">var</span> <span class="nx">b</span> <span class="o">=</span> <span class="nx">a</span><span class="p">;</span>
<span class="nx">a</span><span class="p">.</span><span class="nx">x</span> <span class="o">=</span> <span class="nx">a</span> <span class="o">=</span> <span class="p">{</span><span class="na">n</span><span class="p">:</span> <span class="mi">2</span><span class="p">};</span>
<span class="cm">/*这一行比较复杂。先获取等号左侧的a.x，但a.x并不存在，于是JS为（堆内存中的）对象创建一个新成员x，这个成员的初始值为undefined，（这也是为什么直接引用一个未定义的变量会报错，但是直接引用一个对象的不存在的成员时，会返回undefined.）创建完成后，目标指针已经指向了这个新成员x，并会先挂起，单等等号右侧的内容有结果了，便完成赋值。接着执行赋值语句的右侧，发现a={n:2}是个简单的赋值操作，于是a的新值等于了{n:2}。这里特别注意，这个a已经不是开头的那个a，而是一个全新的a,这个新a指针已经不是指向原来的值的那个堆内存，而是分配了一个新的堆内存。但是原来旧的堆内存因为还有b在占用，所以并未被回收。然后，将这个新的对象a的堆内存指针，赋值给了刚才挂起的新成员x,此时，对象成员x便等于了新的对象a。所以，现在b={n:1,x:{n:2}};a={n:2};a===b.x(true,注意对象的相等，不是值的相等，而是引用的相等，也就是说，相等表示指针是指向同一个堆内存。)  */</span>
<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">a</span><span class="p">.</span><span class="nx">x</span><span class="p">)</span> 	<span class="c1">//undefined</span>
<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">b</span><span class="p">.</span><span class="nx">x</span><span class="p">)</span>  <span class="c1">//{n:2}</span>

<span class="c1">//</span>
<span class="kd">function</span> <span class="nx">Foo</span><span class="p">()</span> <span class="p">{</span>
  <span class="nx">Foo</span><span class="p">.</span><span class="nx">a</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
  <span class="p">}</span>
  <span class="k">this</span><span class="p">.</span><span class="nx">a</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span>
  <span class="p">}</span>
<span class="p">}</span>
<span class="nx">Foo</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">a</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="mi">3</span><span class="p">)</span>
<span class="p">}</span>
<span class="nx">Foo</span><span class="p">.</span><span class="nx">a</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="mi">4</span><span class="p">)</span>
<span class="p">}</span>
<span class="nx">Foo</span><span class="p">.</span><span class="nx">a</span><span class="p">();</span> <span class="c1">//4</span>
<span class="kd">let</span> <span class="nx">obj</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Foo</span><span class="p">();</span> <span class="c1">//this 还是Foo.a</span>
<span class="nx">obj</span><span class="p">.</span><span class="nx">a</span><span class="p">();</span> <span class="c1">//2</span>
<span class="nx">Foo</span><span class="p">.</span><span class="nx">a</span><span class="p">();</span> <span class="c1">//1</span>

<span class="c1">//包装对象</span>

<span class="nb">String</span><span class="p">(</span><span class="dl">'</span><span class="s1">11</span><span class="dl">'</span><span class="p">)</span> <span class="o">==</span> <span class="k">new</span> <span class="nb">String</span><span class="p">(</span><span class="dl">'</span><span class="s1">11</span><span class="dl">'</span><span class="p">);</span>  <span class="c1">//true</span>
<span class="nb">String</span><span class="p">(</span><span class="dl">'</span><span class="s1">11</span><span class="dl">'</span><span class="p">)</span> <span class="o">===</span> <span class="k">new</span> <span class="nb">String</span><span class="p">(</span><span class="dl">'</span><span class="s1">11</span><span class="dl">'</span><span class="p">);</span>  <span class="c1">//false</span>
<span class="k">typeof</span> <span class="nb">String</span><span class="p">(</span><span class="dl">'</span><span class="s1">11</span><span class="dl">'</span><span class="p">)</span> <span class="c1">//string</span>
<span class="k">typeof</span> <span class="k">new</span> <span class="nb">String</span><span class="p">(</span><span class="dl">'</span><span class="s1">11</span><span class="dl">'</span><span class="p">)</span> <span class="c1">//object</span>

<span class="c1">//对象的运算</span>
<span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">]</span> <span class="o">+</span> <span class="p">[</span><span class="mi">2</span><span class="p">,</span> <span class="mi">1</span><span class="p">]</span> <span class="c1">//1,22,1</span>
<span class="c1">//Javascript中所有对象基本都是先调用valueOf方法，如果不是数值，再调用toString方法。</span>

<span class="c1">//异步同步macrotask microtask</span>
<span class="k">async</span> <span class="kd">function</span> <span class="nx">async1</span><span class="p">()</span> <span class="p">{</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">'</span><span class="s1">async1 start</span><span class="dl">'</span><span class="p">);</span>  <span class="c1">//2</span>
    <span class="k">await</span> <span class="nx">async2</span><span class="p">();</span> <span class="c1">//执行完后让出执行栈</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">'</span><span class="s1">async1 end</span><span class="dl">'</span><span class="p">);</span> <span class="c1">//6</span>
<span class="p">}</span>
<span class="k">async</span> <span class="kd">function</span> <span class="nx">async2</span><span class="p">()</span> <span class="p">{</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">'</span><span class="s1">async2</span><span class="dl">'</span><span class="p">);</span>  <span class="c1">//3</span>
<span class="p">}</span>
<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">'</span><span class="s1">script start</span><span class="dl">'</span><span class="p">);</span>  <span class="c1">//1</span>
<span class="nx">setTimeout</span><span class="p">(</span><span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">'</span><span class="s1">setTimeout</span><span class="dl">'</span><span class="p">);</span>  <span class="c1">//8</span>
<span class="p">},</span> <span class="mi">0</span><span class="p">)</span>
<span class="nx">async1</span><span class="p">();</span> <span class="c1">//</span>
<span class="k">new</span> <span class="nb">Promise</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">resolve</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">'</span><span class="s1">promise1</span><span class="dl">'</span><span class="p">);</span>  <span class="c1">//4</span>
    <span class="nx">resolve</span><span class="p">();</span>
<span class="p">}).</span><span class="nx">then</span><span class="p">(</span><span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">'</span><span class="s1">promise2</span><span class="dl">'</span><span class="p">);</span>  <span class="c1">//7</span>
<span class="p">});</span>
<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">'</span><span class="s1">script end</span><span class="dl">'</span><span class="p">);</span>  <span class="c1">//5</span>
<span class="cm">/**await 会让出函数执行栈 (async函数默认返回promise)
 * new Promise会立即执行同步代码
 * 先执行宏任务，紧接着执行微任务,接着渲染 eventloop
 */</span>
</code></pre></div></div>

      </div>

        <!-- Configure Disqus --></div>
  </main></body>
</html>